<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>采购记录与报销状态跟踪</title>
    <link rel="stylesheet" href="styles.css"> 
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>

    <header>
        <h1>🛒 采购与报销记录</h1>
    </header>

    <main>
        <section id="add-entry">
            <h2>+ 新增采购条目</h2>
            <form id="purchase-form">
                <div class="form-group">
                    <label for="order-date">订单时间:</label>
                    <input type="date" id="order-date" required>
                </div>
                <div class="form-group">
                    <label for="name">名称/描述:</label>
                    <input type="text" id="name" required>
                </div>
                <div class="form-group">
                    <label for="price">价格 (¥):</label>
                    <input type="number" id="price" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="applicant">申请人:</label>
                    <input type="text" id="applicant" required>
                </div>
                <div class="form-group">
                    <label for="status">报账状态:</label>
                    <select id="status">
                        <option value="未报账">未报账</option>
                        <option value="已提交报账">已提交报账</option>
                        <option value="已到账">已到账</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="arrival-date">到账日期:</label>
                    <input type="date" id="arrival-date">
                </div>

                <div class="form-group checkbox-group">
                    <label for="is-stocked">已入库:</label>
                    <input type="checkbox" id="is-stocked">
                </div>
                <div class="form-group checkbox-group">
                    <label for="is-invoiced">已开票:</label>
                    <input type="checkbox" id="is-invoiced">
                </div>

                <div class="form-group full-width">
                    <label for="notes">备注:</label>
                    <textarea id="notes"></textarea>
                </div>
                <div class="form-group full-width">
                    <button type="submit">添加记录</button>
                </div>
            </form>
        </section>

        <section id="record-list">
            <h2>📜 采购记录列表 (点击行可编辑)</h2>
            
            <div id="controls">
                
                <div id="filter-controls">
                    <label for="filter-status">筛选状态:</label>
                    <select id="filter-status">
                        <option value="all">所有状态</option>
                        <option value="未报账">未报账</option>
                        <option value="已提交报账">已提交报账</option>
                        <option value="已到账">已到账</option>
                    </select>
                </div>

                <div id="bulk-actions">
                    
                    <button id="apply-bulk-stocked" class="bulk-toggle-button">一键入库 (✅)</button>
                    
                    <button id="apply-bulk-invoiced" class="bulk-toggle-button">一键开票 (🧾)</button>

                    <label for="bulk-status" class="bulk-label">批量更改报账状态为:</label>
                    <select id="bulk-status">
                        <option value="">请选择...</option>
                        <option value="已提交报账">已提交报账</option>
                        <option value="已到账">已到账</option>
                    </select>
                    <button id="apply-bulk">应用报账操作</button>
                </div>
            </div>

            <table id="purchase-table">
                <thead>
                    <tr>
                        <th>序号</th> 
                        <th><input type="checkbox" id="select-all"></th>
                        <th>订单时间</th>
                        <th>名称/描述</th>
                        <th>价格 (¥)</th>
                        <th>申请人</th>
                        <th>入库</th>
                        <th>开票</th>
                        <th>报账状态</th>
                        <th>到账日期</th>
                        <th>备注</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody id="purchase-body">
                    </tbody>
            </table>
        </section>
    </main>

    <div id="total-summary">
        <strong>已选金额总计:</strong> 
        <span id="selected-total">¥ 0.00</span>
    </div>


    <div id="modal" class="modal">
        <div class="modal-content">
            <h3>选择到账日期</h3>
            <label for="modal-arrival-date">到账日期:</label>
            <input type="date" id="modal-arrival-date" required>
            <button id="confirm-arrival-date">确定</button>
            <button id="cancel-modal">取消</button>
        </div>
    </div>

    <div id="edit-modal" class="modal">
        <div class="modal-content edit-form-content">
            <h3>✏️ 编辑采购记录</h3>
            <form id="edit-purchase-form">
                <input type="hidden" id="edit-record-index"> 

                <div class="form-group-edit">
                    <label for="edit-order-date">订单时间:</label>
                    <input type="date" id="edit-order-date" required>
                </div>
                <div class="form-group-edit">
                    <label for="edit-name">名称/描述:</label>
                    <input type="text" id="edit-name" required>
                </div>
                <div class="form-group-edit">
                    <label for="edit-price">价格 (¥):</label>
                    <input type="number" id="edit-price" step="0.01" required>
                </div>
                <div class="form-group-edit">
                    <label for="edit-applicant">申请人:</label>
                    <input type="text" id="edit-applicant" required>
                </div>
                <div class="form-group-edit">
                    <label for="edit-status">报账状态:</label>
                    <select id="edit-status">
                        <option value="未报账">未报账</option>
                        <option value="已提交报账">已提交报账</option>
                        <option value="已到账">已到账</option>
                    </select>
                </div>
                <div class="form-group-edit">
                    <label for="edit-arrival-date">到账日期:</label>
                    <input type="date" id="edit-arrival-date">
                </div>
                <div class="form-group-edit checkbox-group-edit">
                    <label for="edit-is-stocked">已入库:</label>
                    <input type="checkbox" id="edit-is-stocked">
                </div>
                <div class="form-group-edit checkbox-group-edit">
                    <label for="edit-is-invoiced">已开票:</label>
                    <input type="checkbox" id="edit-is-invoiced">
                </div>
                <div class="form-group-edit full-width-edit">
                    <label for="edit-notes">备注:</label>
                    <textarea id="edit-notes"></textarea>
                </div>
                
                <div class="form-actions">
                    <button type="submit" id="save-edit">保存更改</button>
                    <button type="button" id="cancel-edit">取消</button>
                </div>
            </form>
        </div>
    </div>

    <footer>
        <p>&copy; 采购记录系统</p>
    </footer>

    <script src="script.js"></script>

</body>
</html>
